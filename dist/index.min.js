!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("sinon"));else if("function"==typeof define&&define.amd)define(["sinon"],t);else{var r="object"==typeof exports?t(require("sinon")):t(e.sinon);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){(function(e,r){var n=200,s="__lodash_hash_undefined__",o=1,a=2,i=9007199254740991,u="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",h="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Function]",_="[object GeneratorFunction]",y="[object Map]",b="[object Number]",g="[object Null]",w="[object Object]",v="[object Proxy]",m="[object RegExp]",x="[object Set]",j="[object String]",F="[object Symbol]",P="[object Undefined]",O="[object ArrayBuffer]",E="[object DataView]",R=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,q={};q["[object Float32Array]"]=q["[object Float64Array]"]=q["[object Int8Array]"]=q["[object Int16Array]"]=q["[object Int32Array]"]=q["[object Uint8Array]"]=q["[object Uint8ClampedArray]"]=q["[object Uint16Array]"]=q["[object Uint32Array]"]=!0,q[u]=q[c]=q[O]=q[h]=q[E]=q[f]=q[p]=q[d]=q[y]=q[b]=q[w]=q[m]=q[x]=q[j]=q["[object WeakMap]"]=!1;var C="object"==typeof e&&e&&e.Object===Object&&e,k="object"==typeof self&&self&&self.Object===Object&&self,M=C||k||Function("return this")(),A=t&&!t.nodeType&&t,T=A&&"object"==typeof r&&r&&!r.nodeType&&r,B=T&&T.exports===A,z=B&&C.process,U=function(){try{return z&&z.binding&&z.binding("util")}catch(e){}}(),H=U&&U.isTypedArray;function I(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function $(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function N(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var L,D,K,W=Array.prototype,Q=Function.prototype,J=Object.prototype,V=M["__core-js_shared__"],Y=Q.toString,Z=J.hasOwnProperty,G=(L=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",X=J.toString,ee=RegExp("^"+Y.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=B?M.Buffer:void 0,re=M.Symbol,ne=M.Uint8Array,se=J.propertyIsEnumerable,oe=W.splice,ae=re?re.toStringTag:void 0,ie=Object.getOwnPropertySymbols,ue=te?te.isBuffer:void 0,ce=(D=Object.keys,K=Object,function(e){return D(K(e))}),le=Ue(M,"DataView"),he=Ue(M,"Map"),fe=Ue(M,"Promise"),pe=Ue(M,"Set"),de=Ue(M,"WeakMap"),_e=Ue(Object,"create"),ye=Ne(le),be=Ne(he),ge=Ne(fe),we=Ne(pe),ve=Ne(de),me=re?re.prototype:void 0,xe=me?me.valueOf:void 0;function je(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Fe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Pe;++t<r;)this.add(e[t])}function Ee(e){var t=this.__data__=new Fe(e);this.size=t.size}function Re(e,t){var r=Ke(e),n=!r&&De(e),s=!r&&!n&&We(e),o=!r&&!n&&!s&&Ze(e),a=r||n||s||o,i=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=i.length;for(var c in e)!t&&!Z.call(e,c)||a&&("length"==c||s&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||$e(c,u))||i.push(c);return i}function Se(e,t){for(var r=e.length;r--;)if(Le(e[r][0],t))return r;return-1}function qe(e){return null==e?void 0===e?P:g:ae&&ae in Object(e)?function(e){var t=Z.call(e,ae),r=e[ae];try{e[ae]=void 0;var n=!0}catch(e){}var s=X.call(e);n&&(t?e[ae]=r:delete e[ae]);return s}(e):function(e){return X.call(e)}(e)}function Ce(e){return Ye(e)&&qe(e)==u}function ke(e,t,r,n,s){return e===t||(null==e||null==t||!Ye(e)&&!Ye(t)?e!=e&&t!=t:function(e,t,r,n,s,i){var l=Ke(e),d=Ke(t),_=l?c:Ie(e),g=d?c:Ie(t),v=(_=_==u?w:_)==w,P=(g=g==u?w:g)==w,R=_==g;if(R&&We(e)){if(!We(t))return!1;l=!0,v=!1}if(R&&!v)return i||(i=new Ee),l||Ze(e)?Te(e,t,r,n,s,i):function(e,t,r,n,s,i,u){switch(r){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!i(new ne(e),new ne(t)));case h:case f:case b:return Le(+e,+t);case p:return e.name==t.name&&e.message==t.message;case m:case j:return e==t+"";case y:var c=$;case x:var l=n&o;if(c||(c=N),e.size!=t.size&&!l)return!1;var d=u.get(e);if(d)return d==t;n|=a,u.set(e,t);var _=Te(c(e),c(t),n,s,i,u);return u.delete(e),_;case F:if(xe)return xe.call(e)==xe.call(t)}return!1}(e,t,_,r,n,s,i);if(!(r&o)){var S=v&&Z.call(e,"__wrapped__"),q=P&&Z.call(t,"__wrapped__");if(S||q){var C=S?e.value():e,k=q?t.value():t;return i||(i=new Ee),s(C,k,r,n,i)}}if(!R)return!1;return i||(i=new Ee),function(e,t,r,n,s,a){var i=r&o,u=Be(e),c=u.length,l=Be(t).length;if(c!=l&&!i)return!1;var h=c;for(;h--;){var f=u[h];if(!(i?f in t:Z.call(t,f)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var d=!0;a.set(e,t),a.set(t,e);var _=i;for(;++h<c;){f=u[h];var y=e[f],b=t[f];if(n)var g=i?n(b,y,f,t,e,a):n(y,b,f,e,t,a);if(!(void 0===g?y===b||s(y,b,r,n,a):g)){d=!1;break}_||(_="constructor"==f)}if(d&&!_){var w=e.constructor,v=t.constructor;w!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof v&&v instanceof v)&&(d=!1)}return a.delete(e),a.delete(t),d}(e,t,r,n,s,i)}(e,t,r,n,ke,s))}function Me(e){return!(!Ve(e)||function(e){return!!G&&G in e}(e))&&(Qe(e)?ee:R).test(Ne(e))}function Ae(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||J,t!==n)return ce(e);var t,r,n,s=[];for(var o in Object(e))Z.call(e,o)&&"constructor"!=o&&s.push(o);return s}function Te(e,t,r,n,s,i){var u=r&o,c=e.length,l=t.length;if(c!=l&&!(u&&l>c))return!1;var h=i.get(e);if(h&&i.get(t))return h==t;var f=-1,p=!0,d=r&a?new Oe:void 0;for(i.set(e,t),i.set(t,e);++f<c;){var _=e[f],y=t[f];if(n)var b=u?n(y,_,f,t,e,i):n(_,y,f,e,t,i);if(void 0!==b){if(b)continue;p=!1;break}if(d){if(!I(t,(function(e,t){if(o=t,!d.has(o)&&(_===e||s(_,e,r,n,i)))return d.push(t);var o}))){p=!1;break}}else if(_!==y&&!s(_,y,r,n,i)){p=!1;break}}return i.delete(e),i.delete(t),p}function Be(e){return function(e,t,r){var n=t(e);return Ke(e)?n:function(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}(n,r(e))}(e,Ge,He)}function ze(e,t){var r,n,s=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?s["string"==typeof t?"string":"hash"]:s.map}function Ue(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Me(r)?r:void 0}je.prototype.clear=function(){this.__data__=_e?_e(null):{},this.size=0},je.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},je.prototype.get=function(e){var t=this.__data__;if(_e){var r=t[e];return r===s?void 0:r}return Z.call(t,e)?t[e]:void 0},je.prototype.has=function(e){var t=this.__data__;return _e?void 0!==t[e]:Z.call(t,e)},je.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_e&&void 0===t?s:t,this},Fe.prototype.clear=function(){this.__data__=[],this.size=0},Fe.prototype.delete=function(e){var t=this.__data__,r=Se(t,e);return!(r<0)&&(r==t.length-1?t.pop():oe.call(t,r,1),--this.size,!0)},Fe.prototype.get=function(e){var t=this.__data__,r=Se(t,e);return r<0?void 0:t[r][1]},Fe.prototype.has=function(e){return Se(this.__data__,e)>-1},Fe.prototype.set=function(e,t){var r=this.__data__,n=Se(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Pe.prototype.clear=function(){this.size=0,this.__data__={hash:new je,map:new(he||Fe),string:new je}},Pe.prototype.delete=function(e){var t=ze(this,e).delete(e);return this.size-=t?1:0,t},Pe.prototype.get=function(e){return ze(this,e).get(e)},Pe.prototype.has=function(e){return ze(this,e).has(e)},Pe.prototype.set=function(e,t){var r=ze(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Oe.prototype.add=Oe.prototype.push=function(e){return this.__data__.set(e,s),this},Oe.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.clear=function(){this.__data__=new Fe,this.size=0},Ee.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Fe){var s=r.__data__;if(!he||s.length<n-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new Pe(s)}return r.set(e,t),this.size=r.size,this};var He=ie?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,s=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[s++]=a)}return o}(ie(e),(function(t){return se.call(e,t)})))}:function(){return[]},Ie=qe;function $e(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function Ne(e){if(null!=e){try{return Y.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Le(e,t){return e===t||e!=e&&t!=t}(le&&Ie(new le(new ArrayBuffer(1)))!=E||he&&Ie(new he)!=y||fe&&"[object Promise]"!=Ie(fe.resolve())||pe&&Ie(new pe)!=x||de&&"[object WeakMap]"!=Ie(new de))&&(Ie=function(e){var t=qe(e),r=t==w?e.constructor:void 0,n=r?Ne(r):"";if(n)switch(n){case ye:return E;case be:return y;case ge:return"[object Promise]";case we:return x;case ve:return"[object WeakMap]"}return t});var De=Ce(function(){return arguments}())?Ce:function(e){return Ye(e)&&Z.call(e,"callee")&&!se.call(e,"callee")},Ke=Array.isArray;var We=ue||function(){return!1};function Qe(e){if(!Ve(e))return!1;var t=qe(e);return t==d||t==_||t==l||t==v}function Je(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Ve(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ye(e){return null!=e&&"object"==typeof e}var Ze=H?function(e){return function(t){return e(t)}}(H):function(e){return Ye(e)&&Je(e.length)&&!!q[qe(e)]};function Ge(e){return null!=(t=e)&&Je(t.length)&&!Qe(t)?Re(e):Ae(e);var t}r.exports=function(e,t){return ke(e,t)}}).call(this,r(1),r(5)(e))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(t,r){t.exports=e},function(e,t){e.exports=l,e.exports.parse=s,e.exports.compile=function(e,t){return o(s(e,t),t)},e.exports.tokensToFunction=o,e.exports.tokensToRegExp=c;var r="/",n=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function s(e,t){for(var s,o=[],u=0,c=0,l="",h=t&&t.delimiter||r,f=t&&t.whitelist||void 0,p=!1;null!==(s=n.exec(e));){var d=s[0],_=s[1],y=s.index;if(l+=e.slice(c,y),c=y+d.length,_)l+=_[1],p=!0;else{var b="",g=s[2],w=s[3],v=s[4],m=s[5];if(!p&&l.length){var x=l.length-1,j=l[x];(!f||f.indexOf(j)>-1)&&(b=j,l=l.slice(0,x))}l&&(o.push(l),l="",p=!1);var F="+"===m||"*"===m,P="?"===m||"*"===m,O=w||v,E=b||h;o.push({name:g||u++,prefix:b,delimiter:E,optional:P,repeat:F,pattern:O?i(O):"[^"+a(E===h?E:E+h)+"]+?"})}}return(l||c<e.length)&&o.push(l+e.substr(c)),o}function o(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(r[n]=new RegExp("^(?:"+e[n].pattern+")$",u(t)));return function(t,n){for(var s="",o=n&&n.encode||encodeURIComponent,a=!n||!1!==n.validate,i=0;i<e.length;i++){var u=e[i];if("string"!=typeof u){var c,l=t?t[u.name]:void 0;if(Array.isArray(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but got array');if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<l.length;h++){if(c=o(l[h],u),a&&!r[i].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"');s+=(0===h?u.prefix:u.delimiter)+c}}else if("string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l){if(!u.optional)throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"))}else{if(c=o(String(l),u),a&&!r[i].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+c+'"');s+=u.prefix+c}}else s+=u}return s}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function i(e){return e.replace(/([=!:$/()])/g,"\\$1")}function u(e){return e&&e.sensitive?"":"i"}function c(e,t,n){for(var s=(n=n||{}).strict,o=!1!==n.start,i=!1!==n.end,c=n.delimiter||r,l=[].concat(n.endsWith||[]).map(a).concat("$").join("|"),h=o?"^":"",f=0;f<e.length;f++){var p=e[f];if("string"==typeof p)h+=a(p);else{var d=p.repeat?"(?:"+p.pattern+")(?:"+a(p.delimiter)+"(?:"+p.pattern+"))*":p.pattern;t&&t.push(p),p.optional?p.prefix?h+="(?:"+a(p.prefix)+"("+d+"))?":h+="("+d+")?":h+=a(p.prefix)+"("+d+")"}}if(i)s||(h+="(?:"+a(c)+")?"),h+="$"===l?"$":"(?="+l+")";else{var _=e[e.length-1],y="string"==typeof _?_[_.length-1]===c:void 0===_;s||(h+="(?:"+a(c)+"(?="+l+"))?"),y||(h+="(?="+a(c)+"|"+l+")")}return new RegExp(h,u(n))}function l(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}(e,t):Array.isArray(e)?function(e,t,r){for(var n=[],s=0;s<e.length;s++)n.push(l(e[s],t,r).source);return new RegExp("(?:"+n.join("|")+")",u(r))}(e,t,r):function(e,t,r){return c(s(e,r),t,r)}(e,t,r)}},function(e,t,r){"use strict";(function(t){var n=r(6),s=r(7),o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,i=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function u(e){return(e||"").toString().replace(i,"")}var c=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function h(e){var r,n=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},s={},a=typeof(e=e||n);if("blob:"===e.protocol)s=new p(unescape(e.pathname),{});else if("string"===a)for(r in s=new p(e,{}),l)delete s[r];else if("object"===a){for(r in e)r in l||(s[r]=e[r]);void 0===s.slashes&&(s.slashes=o.test(e.href))}return s}function f(e){e=u(e);var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function p(e,t,r){if(e=u(e),!(this instanceof p))return new p(e,t,r);var o,a,i,l,d,_,y=c.slice(),b=typeof t,g=this,w=0;for("object"!==b&&"string"!==b&&(r=t,t=null),r&&"function"!=typeof r&&(r=s.parse),t=h(t),o=!(a=f(e||"")).protocol&&!a.slashes,g.slashes=a.slashes||o&&t.slashes,g.protocol=a.protocol||t.protocol||"",e=a.rest,a.slashes||(y[3]=[/(.*)/,"pathname"]);w<y.length;w++)"function"!=typeof(l=y[w])?(i=l[0],_=l[1],i!=i?g[_]=e:"string"==typeof i?~(d=e.indexOf(i))&&("number"==typeof l[2]?(g[_]=e.slice(0,d),e=e.slice(d+l[2])):(g[_]=e.slice(d),e=e.slice(0,d))):(d=i.exec(e))&&(g[_]=d[1],e=e.slice(0,d.index)),g[_]=g[_]||o&&l[3]&&t[_]||"",l[4]&&(g[_]=g[_].toLowerCase())):e=l(e);r&&(g.query=r(g.query)),o&&t.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==t.pathname)&&(g.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,s=r[n-1],o=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(o=!0),r.splice(n,1),a--);return o&&r.unshift(""),"."!==s&&".."!==s||r.push(""),r.join("/")}(g.pathname,t.pathname)),n(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(l=g.auth.split(":"),g.username=l[0]||"",g.password=l[1]||""),g.origin=g.protocol&&g.host&&"file:"!==g.protocol?g.protocol+"//"+g.host:"null",g.href=g.toString()}p.prototype={set:function(e,t,r){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||s.parse)(t)),o[e]=t;break;case"port":o[e]=t,n(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;default:o[e]=t}for(var i=0;i<c.length;i++){var u=c[i];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=s.stringify);var t,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(r.slashes?"//":"");return r.username&&(o+=r.username,r.password&&(o+=":"+r.password),o+="@"),o+=r.host+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(o+=r.hash),o}},p.extractProtocol=f,p.location=h,p.trimLeft=u,p.qs=s,e.exports=p}).call(this,r(1))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,r){"use strict";var n,s=Object.prototype.hasOwnProperty;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,o,a=[];for(o in"string"!=typeof t&&(t="?"),e)if(s.call(e,o)){if((r=e[o])||null!==r&&r!==n&&!isNaN(r)||(r=""),o=encodeURIComponent(o),r=encodeURIComponent(r),null===o||null===r)continue;a.push(o+"="+r)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,n={};t=r.exec(e);){var s=o(t[1]),a=o(t[2]);null===s||null===a||s in n||(n[s]=a)}return n}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(t);class ServerHistory{constructor(){n(this,"logs",[]),n(this,"_history",[]),n(this,"_call",null),n(this,"_target",null),n(this,"_verbose",!1)}push(e,t){this._history.push({request:e,response:t})}log(e){this.logs.push(e),this._verbose&&console.log(e)}get request(){if(this._call){const e=this._history[this._call-1].request;return this._call=null,e}return this._target="request",this}get response(){if(this._call){const e=this._history[this._call-1].response;return this._call=null,e}return this._target="response",this}get first(){return this.atCall(1)}get second(){return this.atCall(2)}get third(){return this.atCall(3)}get last(){return this.atCall(this._history.length)}atCall(e){if(this._target){const t=this._history[e-1][this._target];return this._target=null,t}return this._call=e,this}all(){if(this._target){const e=this._history.map(e=>e[this._target]);return this._target=null,e}return this._history}reset(){this._history=[],this._log=[],this._call=null,this._target=null}}class FMFException extends Error{constructor(e,t=null){super(e),this.previous=t,Error.captureStackTrace&&Error.captureStackTrace(this,FMFException)}toString(){return"FMF error: ".concat(this.message)}}var s={default:{body:"Hello world !",delay:0,headers:{"content-type":"text/html"},status:200,statusText:"OK"},json:{headers:{"content-type":"application/json"},wrapper:e=>JSON.stringify(e)},204:{body:null,headers:{"content-type":"text/html"},status:204,statusText:"No Content"},400:{body:null,headers:{"content-type":"text/html"},status:400,statusText:"Bad Request"},401:{body:null,headers:{"content-type":"text/html"},status:401,statusText:"Unauthorized"},403:{body:null,headers:{"content-type":"text/html"},status:403,statusText:"Forbidden"},404:{body:null,headers:{"content-type":"text/html"},status:404,statusText:"Not found"},500:{body:null,headers:{"content-type":"text/html"},status:500,statusText:"Internal Server Error"}},o=r(2),a=r.n(o);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=class Server_Server{constructor(){i(this,"_fixtures",[]),i(this,"_verbose",!1),i(this,"_throwOnError",!1),i(this,"_warnOnError",!0),i(this,"_presets",{}),i(this,"history",new ServerHistory);for(let e in s)this._presets[e]=new h(this,e,s[e])}start(){return this.running||(a.a.stub(window,"fetch"),this.stub.callsFake(this._processRequest.bind(this))),this}stop(e=!1){return this.running&&window.fetch.restore(),e&&this.reset(),this}reset(e=!0){return this.running&&e&&this.stub.resetHistory(),this.history.reset(),this._fixtures=[],this}verbose(e){return this._verbose=!!e,this.history._verbose=!!e,this}warnOnError(e){return this._warnOnError=!!e,this}throwOnError(e){return this._throwOnError=!!e,this}warn(e){console.warn(e.toString())}get running(){return window.fetch.reset instanceof Function}get stub(){if(this.running)return window.fetch;throw new FMFException("Server is not started")}preset(e,t={}){if(this._presets[e])return this._presets[e].set(t);let r=new h(this,e,t);return this._presets[e]=r,r}import(e){e instanceof Array||(e=[e]);for(let t of e)if(t instanceof v)t.server=this,this._fixtures.push(t);else{if(!(t instanceof Object))throw new FMFException("Invalid fixture provided");{let e=new v(this),r=t.on||t.when;if(!t.respond)throw new FMFException("Fixture provided as object must have a respond property");r&&e.on.equal(r),e.respond.set(t.respond),this._fixtures.push(e)}}return this}get on(){const e=new v(this);return this._fixtures.push(e),e._mode="on",e.on}get when(){return this.on}get fallback(){return this._getDefaultFixture()}_getDefaultFixture(){const e=this._fixtures.findIndex(e=>null===e._matcher);if(e>=0)return this._fixtures[e];const t=new v(this);return this._fixtures.push(t),t}_processRespond(e={}){return"respond"===e._mode&&(e=this._getDefaultFixture()),e._mode="respond",e}get respond(){return this._getDefaultFixture()}async _findFixture(e){let t=[],r=null;if(!this._fixtures.length)throw new FMFException("No fixtures defined");for(let n of this._fixtures)null!==n._matcher?await n.match(e)&&t.push(n):r=n;if(!t.length){if(!r)throw new FMFException("Unable to find a matching fixture for the current request and no fixture is set as fallback");t[0]=r}return t.length>1&&this.warn("FMF : Server found ".concat(t.length,' fixtures matching the request "').concat(e.url,'". Using the first one.')),t[0]}async _processRequest(e,t){try{e=new j(e,t),this.history.log("Request : ".concat(e.method," ").concat(e.url));let r=await this._findFixture(e.clone()),n=await r.getResponse(e.clone());return this.history.push(e.clone(),n.clone()),this.history.log("Response sent (".concat(n.status," ").concat(n.statusText,")")),n}catch(e){if(this.history.log(e.toString()),this._warnOnError&&this.warn(e),this._throwOnError)throw e instanceof FMFException?e:new FMFException("Request process failure",e);return new Response(e.stack,{"content-type":"text/html",status:500,statusText:e.toString()})}}get calls(){return this.stub.callCount}get request(){return this.history.last.request}get response(){return this.history.last.response}};function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=class ResponseConfigurator_ResponseConfigurator{constructor(e=null){c(this,"server",null),c(this,"_any",{}),c(this,"_responseKeys",["body","delay","headers","status","statusText","wrapper","pattern","before","after"]),this.server=e}_getCurrentResponseSet(){}get with(){return this}get and(){return this}set(e={}){if(!(e instanceof Object))throw new Error("Response set must be an object");for(let t in e){if(!this._responseKeys.includes(t))throw new FMFException('Invalid key "'.concat(t,'" for response set configuration'));this[t](e[t])}return this}body(e){let t=this._getCurrentResponseSet();return!1===e?delete t.body:t.body=e,this}delay(e){let t=this._getCurrentResponseSet();return!1===e?delete t.delay:t.delay=parseInt(e,10),this}header(e,t,r=!1){const n=this._getCurrentResponseSet();return n.headers instanceof Headers||(n.headers=new Headers),r?n.headers.append(e,t):n.headers.set(e,t),this}headers(e={}){if(e&&!(e instanceof Object||e instanceof Headers))throw new Error("Headers must be an object or an Headers instance");e instanceof Object&&(e=new Headers(e));let t=this._getCurrentResponseSet();return!1===e?delete t.headers:t.headers=e,this}status(e){let t=this._getCurrentResponseSet();return!1===e?delete t.status:t.status=parseInt(e,10),this}statusText(e){let t=this._getCurrentResponseSet();return!1===e?delete t.statusText:t.statusText=e,this}wrapper(e){let t=this._getCurrentResponseSet();return!1===e?delete t.wrapper:t.wrapper=e,this}pattern(e){let t=this._getCurrentResponseSet();return!1===e?delete t.pattern:t.pattern=e,this}before(e){if(e&&!(e instanceof Function))throw new Error("Before hook must be a function");let t=this._getCurrentResponseSet();return!1===e?delete t.before:t.before=e,this}after(e){if(e&&!(e instanceof Function))throw new Error("Before hook must be a function");let t=this._getCurrentResponseSet();return!1===e?delete t.after:t.after=e,this}};var h=class Preset_Preset extends l{constructor(e,t,r={}){if(super(e),!t)throw new Error("You must provide a name to the preset");if(this.name=t,r){if(!(r instanceof Object))throw new Error("Preset options must be provided as an object");this.set(r)}}_getCurrentResponseSet(){return this._any}register(){return s[this.name]=Object.assign({},this._any),this}unregister(){return delete s[this.name],this}remove(){return delete this.server._presets[this.name],this}},f=r(0),p=r.n(f);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class BaseProcessor_BaseProcessor{constructor(e,t){d(this,"_key",null),d(this,"_not",!1),d(this,"_evaluate",null),this._key=e,this._matcher=t}get is(){return this}get not(){return this._not=!this._not,this}async _equal(e,t,r){if(t instanceof Function)return await t(e,this._key,r);if(t instanceof RegExp)return t.test(e);try{return e=JSON.parse(e),p()(e,t)}catch(r){return p()(e,t)}}equal(e){return this._evaluate=async t=>{let r=t[this._key];return await this._equal(r,e,t)},this._matcher}equals(e){return this.equal(e)}async process(e,t){let r=await this._evaluate(e,t);return this._not?!r:r}}class BooleanProcessor_BooleanProcessor extends BaseProcessor_BaseProcessor{}class BodyProcessor_BodyProcessor extends BaseProcessor_BaseProcessor{constructor(e,t,r){super(e,t),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"_type",null),this._type=r}async _processBody(e){let t;switch(this._type.toLowerCase()){case"text":try{t=await e.clone().text()}catch(e){throw new FMFException("Unable to parse body as blob",e)}break;case"json":try{t=await e.clone().json()}catch(e){throw new FMFException("Unable to parse body as JSON",e)}break;case"formdata":try{t=await e.clone().formData()}catch(e){throw new FMFException("Unable to parse body as FormData",e)}break;case"arraybuffer":try{t=await e.clone().arrayBuffer()}catch(e){throw new FMFException("Unable to parse body as Blob",e)}break;case"blob":try{t=await e.clone().blob()}catch(e){throw new FMFException("Unable to parse body as Blob",e)}break;default:throw new FMFException("Unknown body decoder callback")}return t}equal(e){return this._evaluate=async t=>{const r=await this._processBody(t);return await this._equal(r,e,t)},this._matcher}}class HeadersProcessor_HeadersProcessor extends BaseProcessor_BaseProcessor{constructor(e,t,r){super(e,t),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"_name",null),this._name=r}equal(e){return this._evaluate=async t=>{const r=t.headers;if(!(r instanceof Headers))throw new FMFException("Unable to extract headers from request");return await this._equal(this._name?r.get(this._name):r,e)},this._matcher}}class QueryProcessor_QueryProcessor extends BaseProcessor_BaseProcessor{}class StringProcessor_StringProcessor extends BaseProcessor_BaseProcessor{}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=class RequestMatcher_RequestMatcher{constructor(e){_(this,"_processors",[]),_(this,"_requestKeys",["method","url","headers","destination","referrer","referrerPolicy","mode","credentials","redirect","integrity","cache","protocol","slashes","auth","username","password","host","hostname","port","pathname","query","hash","href","method","header","body"]),this.fixture=e}get on(){return this.fixture.on}get and(){return this}get respond(){return this.fixture.respond}get fallback(){throw new FMFException("You cannot define a fallback fixture from request matcher")}getProcessor(e){let t;switch(e){case"headers":t=new HeadersProcessor_HeadersProcessor(e,this);break;case"query":t=new QueryProcessor_QueryProcessor(e,this);break;case"slashes":t=new BooleanProcessor_BooleanProcessor(e,this);break;case"auth":case"cache":case"credentials":case"destination":case"hash":case"href":case"host":case"hostname":case"integrity":case"mode":case"method":case"password":case"pathname":case"port":case"protocol":case"redirect":case"referrer":case"referrerPolicy":case"url":case"username":t=new StringProcessor_StringProcessor(e,this);break;default:throw new FMFException('Unsupported request parameter "'.concat(e,'" to check'))}return this._processors.push(t),t}body(e="text"){const t=new BodyProcessor_BodyProcessor("headers",this,e);return this._processors.push(t),t}header(e){const t=new HeadersProcessor_HeadersProcessor("headers",this,e);return this._processors.push(t),t}async match(e,t){for(let r of this._processors)if(!await r.process(e,t))return!1;return!0}equal(e){if(!(e instanceof Object))throw new Error("Request conditions set must be an object");for(let t in e){if(!this._requestKeys.includes(t))throw new FMFException('Invalid key "'.concat(t,'" for request conditions configuration'));this[t].equal(e[t])}return this}},b=r(3),g=r.n(b);function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=class Fixture_Fixture extends l{constructor(e){super(e),w(this,"calls",0),w(this,"ownCalls",[]),w(this,"globalCalls",[]),w(this,"_callnum",null),w(this,"_matcher",null),w(this,"_ownCall",!1),w(this,"_responseKeys",["body","delay","headers","status","statusText","wrapper","pattern","before","after","preset"])}get on(){return"respond"===this._mode?this.server.on:(this._matcher=this._matcher||new y(this),new Proxy(this._matcher,{get:(e,t)=>t in e?e[t]:e.getProcessor(t)}))}get when(){return this.on}get respond(){return this.server?this.server._processRespond(this):this}_getCurrentResponseSet(){return null!==this._callnum?this._ownCall?(this.ownCalls[this._callnum]=this.ownCalls[this._callnum]||{},this.ownCalls[this._callnum]):(this.globalCalls[this._callnum]=this.globalCalls[this._callnum]||{},this.globalCalls[this._callnum]):(this._any=this._any,this._any)}get to(){return this}get fallback(){return this.server.fallback}firstCall(e=!1){return this._callnum=1,this._ownCall=e,this}secondCall(e=!1){return this._callnum=2,this._ownCall=e,this}thirdCall(e=!1){return this._callnum=3,this._ownCall=e,this}call(e,t){return this._callnum=parseInt(e,10),this._ownCall=t,this}get any(){return this._callnum=null,this._ownCall=!1,this}preset(e){let t=this._getCurrentResponseSet();return e?t.preset=e:delete t.preset,this}throw(e=""){this.before((function(){throw new FMFException(e)}))}async match(e,t){return!this._matcher||await this._matcher.match(e,t)}async sleep(e){await new Promise(t=>setTimeout(t,e))}extractParams(e,t){const r={},n=[],s=g()(t,n).exec(e);for(let e=0;e<n.length;e++){let t=n[e].name,o=s[e+1];r[t]=o}return r}wrap(e,t){return t instanceof Function?t(e):e||null}getPath(e,t){let r=(t.pattern||e.pathname).split("/").filter(e=>e&&e.indexOf(":")<0),n=e.method.toLowerCase();return r.concat(n).join("/")}_exceptionManagement(e,t){if(e instanceof Error||"string"==typeof e)throw new FMFException(t,e);if(e instanceof Response)return e;if(e instanceof h){let{body:t,headers:r,status:n,statusText:s}=e._any;return new Response(t,{headers:r,status:n,statusText:s})}if(e instanceof Object){let{body:t,headers:r,status:n,statusText:s}=e;return new Response(t,{headers:r,status:n,statusText:s})}}async _buildResponse(e,t){let r;if(t.before instanceof Function)try{let r=await t.before.call(this,this.server,e,t);r&&(t=r)}catch(e){return this._exceptionManagement(e,e.message||"Unable to process before callback")}let n=t.pattern?this.extractParams(e.pathname,t.pattern):{};try{r=t.body instanceof Function?await t.body.call(this,n,{request:e,response:t,server:this.server}):t.body}catch(e){return this._exceptionManagement(e,e.message||"Unable to process body callback")}if(t.preset){let e=this.server._presets[t.preset];if(!e)throw new FMFException("Unable to apply preset. Preset ".concat(t.preset," is not defined"));t=Object.assign(t,e._any)}let{headers:s,status:o,statusText:a,wrapper:i}=t;const u=new Response(this.wrap(r,i),{headers:s,status:o,statusText:a});try{t.after instanceof Function&&await t.after.call(this,this.server,u)}catch(e){return this._exceptionManagement(e,e.message||"Unable to process after callback")}return t.delay&&await this.sleep(t.delay),u}getResponse(e){const t=++this.calls,r=this.server.calls;return this._buildResponse(e,this.ownCalls[t]||this.globalCalls[r]||this._any)}},m=r(4),x=r.n(m);class FMFRequest_FMFRequest extends(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Request)){constructor(e,t){super(e,t);const r=x()(this.url,!0);for(let e in r)Object.defineProperty(this,e,{enumerable:!0,value:r[e]})}clone(){return new FMFRequest_FMFRequest(super.clone())}}var j=FMFRequest_FMFRequest;r.d(t,"Fixture",(function(){return v})),r.d(t,"FMFRequest",(function(){return j})),r.d(t,"Preset",(function(){return h})),r.d(t,"Server",(function(){return u})),r.d(t,"presets",(function(){return s}));t.default=u}])}));