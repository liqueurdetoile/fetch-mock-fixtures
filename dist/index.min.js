!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("sinon"));else if("function"==typeof define&&define.amd)define(["sinon"],e);else{var r="object"==typeof exports?e(require("sinon")):e(t.sinon);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=8)}([function(t,e,r){(function(t,r){var n=200,s="__lodash_hash_undefined__",o=1,i=2,a=9007199254740991,u="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",h="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Function]",y="[object GeneratorFunction]",_="[object Map]",b="[object Number]",g="[object Null]",w="[object Object]",v="[object Proxy]",m="[object RegExp]",x="[object Set]",j="[object String]",O="[object Symbol]",C="[object Undefined]",P="[object ArrayBuffer]",E="[object DataView]",k=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,S={};S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S[u]=S[c]=S[P]=S[h]=S[E]=S[f]=S[p]=S[d]=S[_]=S[b]=S[w]=S[m]=S[x]=S[j]=S["[object WeakMap]"]=!1;var q="object"==typeof t&&t&&t.Object===Object&&t,T="object"==typeof self&&self&&self.Object===Object&&self,A=q||T||Function("return this")(),F=e&&!e.nodeType&&e,z=F&&"object"==typeof r&&r&&!r.nodeType&&r,U=z&&z.exports===F,I=U&&q.process,$=function(){try{return I&&I.binding&&I.binding("util")}catch(t){}}(),N=$&&$.isTypedArray;function L(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function M(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function D(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var B,H,K,W=Array.prototype,J=Function.prototype,V=Object.prototype,Y=A["__core-js_shared__"],Z=J.toString,G=V.hasOwnProperty,Q=(B=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"",X=V.toString,tt=RegExp("^"+Z.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),et=U?A.Buffer:void 0,rt=A.Symbol,nt=A.Uint8Array,st=V.propertyIsEnumerable,ot=W.splice,it=rt?rt.toStringTag:void 0,at=Object.getOwnPropertySymbols,ut=et?et.isBuffer:void 0,ct=(H=Object.keys,K=Object,function(t){return H(K(t))}),lt=$t(A,"DataView"),ht=$t(A,"Map"),ft=$t(A,"Promise"),pt=$t(A,"Set"),dt=$t(A,"WeakMap"),yt=$t(Object,"create"),_t=Dt(lt),bt=Dt(ht),gt=Dt(ft),wt=Dt(pt),vt=Dt(dt),mt=rt?rt.prototype:void 0,xt=mt?mt.valueOf:void 0;function jt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ot(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ct(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Pt(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ct;++e<r;)this.add(t[e])}function Et(t){var e=this.__data__=new Ot(t);this.size=e.size}function kt(t,e){var r=Kt(t),n=!r&&Ht(t),s=!r&&!n&&Wt(t),o=!r&&!n&&!s&&Gt(t),i=r||n||s||o,a=i?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=a.length;for(var c in t)!e&&!G.call(t,c)||i&&("length"==c||s&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Mt(c,u))||a.push(c);return a}function Rt(t,e){for(var r=t.length;r--;)if(Bt(t[r][0],e))return r;return-1}function St(t){return null==t?void 0===t?C:g:it&&it in Object(t)?function(t){var e=G.call(t,it),r=t[it];try{t[it]=void 0;var n=!0}catch(t){}var s=X.call(t);n&&(e?t[it]=r:delete t[it]);return s}(t):function(t){return X.call(t)}(t)}function qt(t){return Zt(t)&&St(t)==u}function Tt(t,e,r,n,s){return t===e||(null==t||null==e||!Zt(t)&&!Zt(e)?t!=t&&e!=e:function(t,e,r,n,s,a){var l=Kt(t),d=Kt(e),y=l?c:Lt(t),g=d?c:Lt(e),v=(y=y==u?w:y)==w,C=(g=g==u?w:g)==w,k=y==g;if(k&&Wt(t)){if(!Wt(e))return!1;l=!0,v=!1}if(k&&!v)return a||(a=new Et),l||Gt(t)?zt(t,e,r,n,s,a):function(t,e,r,n,s,a,u){switch(r){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!a(new nt(t),new nt(e)));case h:case f:case b:return Bt(+t,+e);case p:return t.name==e.name&&t.message==e.message;case m:case j:return t==e+"";case _:var c=M;case x:var l=n&o;if(c||(c=D),t.size!=e.size&&!l)return!1;var d=u.get(t);if(d)return d==e;n|=i,u.set(t,e);var y=zt(c(t),c(e),n,s,a,u);return u.delete(t),y;case O:if(xt)return xt.call(t)==xt.call(e)}return!1}(t,e,y,r,n,s,a);if(!(r&o)){var R=v&&G.call(t,"__wrapped__"),S=C&&G.call(e,"__wrapped__");if(R||S){var q=R?t.value():t,T=S?e.value():e;return a||(a=new Et),s(q,T,r,n,a)}}if(!k)return!1;return a||(a=new Et),function(t,e,r,n,s,i){var a=r&o,u=Ut(t),c=u.length,l=Ut(e).length;if(c!=l&&!a)return!1;for(var h=c;h--;){var f=u[h];if(!(a?f in e:G.call(e,f)))return!1}var p=i.get(t);if(p&&i.get(e))return p==e;var d=!0;i.set(t,e),i.set(e,t);for(var y=a;++h<c;){f=u[h];var _=t[f],b=e[f];if(n)var g=a?n(b,_,f,e,t,i):n(_,b,f,t,e,i);if(!(void 0===g?_===b||s(_,b,r,n,i):g)){d=!1;break}y||(y="constructor"==f)}if(d&&!y){var w=t.constructor,v=e.constructor;w!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof v&&v instanceof v)&&(d=!1)}return i.delete(t),i.delete(e),d}(t,e,r,n,s,a)}(t,e,r,n,Tt,s))}function At(t){return!(!Yt(t)||(e=t,Q&&Q in e))&&(Jt(t)?tt:k).test(Dt(t));var e}function Ft(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||V,e!==n)return ct(t);var e,r,n,s=[];for(var o in Object(t))G.call(t,o)&&"constructor"!=o&&s.push(o);return s}function zt(t,e,r,n,s,a){var u=r&o,c=t.length,l=e.length;if(c!=l&&!(u&&l>c))return!1;var h=a.get(t);if(h&&a.get(e))return h==e;var f=-1,p=!0,d=r&i?new Pt:void 0;for(a.set(t,e),a.set(e,t);++f<c;){var y=t[f],_=e[f];if(n)var b=u?n(_,y,f,e,t,a):n(y,_,f,t,e,a);if(void 0!==b){if(b)continue;p=!1;break}if(d){if(!L(e,function(t,e){if(o=e,!d.has(o)&&(y===t||s(y,t,r,n,a)))return d.push(e);var o})){p=!1;break}}else if(y!==_&&!s(y,_,r,n,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Ut(t){return function(t,e,r){var n=e(t);return Kt(t)?n:function(t,e){for(var r=-1,n=e.length,s=t.length;++r<n;)t[s+r]=e[r];return t}(n,r(t))}(t,Qt,Nt)}function It(t,e){var r,n,s=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?s["string"==typeof e?"string":"hash"]:s.map}function $t(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return At(r)?r:void 0}jt.prototype.clear=function(){this.__data__=yt?yt(null):{},this.size=0},jt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},jt.prototype.get=function(t){var e=this.__data__;if(yt){var r=e[t];return r===s?void 0:r}return G.call(e,t)?e[t]:void 0},jt.prototype.has=function(t){var e=this.__data__;return yt?void 0!==e[t]:G.call(e,t)},jt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=yt&&void 0===e?s:e,this},Ot.prototype.clear=function(){this.__data__=[],this.size=0},Ot.prototype.delete=function(t){var e=this.__data__,r=Rt(e,t);return!(r<0||(r==e.length-1?e.pop():ot.call(e,r,1),--this.size,0))},Ot.prototype.get=function(t){var e=this.__data__,r=Rt(e,t);return r<0?void 0:e[r][1]},Ot.prototype.has=function(t){return Rt(this.__data__,t)>-1},Ot.prototype.set=function(t,e){var r=this.__data__,n=Rt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},Ct.prototype.clear=function(){this.size=0,this.__data__={hash:new jt,map:new(ht||Ot),string:new jt}},Ct.prototype.delete=function(t){var e=It(this,t).delete(t);return this.size-=e?1:0,e},Ct.prototype.get=function(t){return It(this,t).get(t)},Ct.prototype.has=function(t){return It(this,t).has(t)},Ct.prototype.set=function(t,e){var r=It(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},Pt.prototype.add=Pt.prototype.push=function(t){return this.__data__.set(t,s),this},Pt.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.clear=function(){this.__data__=new Ot,this.size=0},Et.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Ot){var s=r.__data__;if(!ht||s.length<n-1)return s.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ct(s)}return r.set(t,e),this.size=r.size,this};var Nt=at?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,s=0,o=[];++r<n;){var i=t[r];e(i,r,t)&&(o[s++]=i)}return o}(at(t),function(e){return st.call(t,e)}))}:function(){return[]},Lt=St;function Mt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||R.test(t))&&t>-1&&t%1==0&&t<e}function Dt(t){if(null!=t){try{return Z.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Bt(t,e){return t===e||t!=t&&e!=e}(lt&&Lt(new lt(new ArrayBuffer(1)))!=E||ht&&Lt(new ht)!=_||ft&&"[object Promise]"!=Lt(ft.resolve())||pt&&Lt(new pt)!=x||dt&&"[object WeakMap]"!=Lt(new dt))&&(Lt=function(t){var e=St(t),r=e==w?t.constructor:void 0,n=r?Dt(r):"";if(n)switch(n){case _t:return E;case bt:return _;case gt:return"[object Promise]";case wt:return x;case vt:return"[object WeakMap]"}return e});var Ht=qt(function(){return arguments}())?qt:function(t){return Zt(t)&&G.call(t,"callee")&&!st.call(t,"callee")},Kt=Array.isArray;var Wt=ut||function(){return!1};function Jt(t){if(!Yt(t))return!1;var e=St(t);return e==d||e==y||e==l||e==v}function Vt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Yt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Zt(t){return null!=t&&"object"==typeof t}var Gt=N?function(t){return function(e){return t(e)}}(N):function(t){return Zt(t)&&Vt(t.length)&&!!S[St(t)]};function Qt(t){return null!=(e=t)&&Vt(e.length)&&!Jt(e)?kt(t):Ft(t);var e}r.exports=function(t,e){return Tt(t,e)}}).call(this,r(1),r(5)(t))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(e,r){e.exports=t},function(t,e){t.exports=l,t.exports.parse=s,t.exports.compile=function(t,e){return o(s(t,e))},t.exports.tokensToFunction=o,t.exports.tokensToRegExp=c;var r="/",n=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function s(t,e){for(var s,o=[],u=0,c=0,l="",h=e&&e.delimiter||r,f=e&&e.whitelist||void 0,p=!1;null!==(s=n.exec(t));){var d=s[0],y=s[1],_=s.index;if(l+=t.slice(c,_),c=_+d.length,y)l+=y[1],p=!0;else{var b="",g=s[2],w=s[3],v=s[4],m=s[5];if(!p&&l.length){var x=l.length-1,j=l[x];(!f||f.indexOf(j)>-1)&&(b=j,l=l.slice(0,x))}l&&(o.push(l),l="",p=!1);var O="+"===m||"*"===m,C="?"===m||"*"===m,P=w||v,E=b||h;o.push({name:g||u++,prefix:b,delimiter:E,optional:C,repeat:O,pattern:P?a(P):"[^"+i(E===h?E:E+h)+"]+?"})}}return(l||c<t.length)&&o.push(l+t.substr(c)),o}function o(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var s="",o=n&&n.encode||encodeURIComponent,i=0;i<t.length;i++){var a=t[i];if("string"!=typeof a){var u,c=r?r[a.name]:void 0;if(Array.isArray(c)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but got array');if(0===c.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var l=0;l<c.length;l++){if(u=o(c[l],a),!e[i].test(u))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'"');s+=(0===l?a.prefix:a.delimiter)+u}}else if("string"!=typeof c&&"number"!=typeof c&&"boolean"!=typeof c){if(!a.optional)throw new TypeError('Expected "'+a.name+'" to be '+(a.repeat?"an array":"a string"))}else{if(u=o(String(c),a),!e[i].test(u))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+u+'"');s+=a.prefix+u}}else s+=a}return s}}function i(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function a(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function u(t){return t&&t.sensitive?"":"i"}function c(t,e,n){for(var s=(n=n||{}).strict,o=!1!==n.start,a=!1!==n.end,c=n.delimiter||r,l=[].concat(n.endsWith||[]).map(i).concat("$").join("|"),h=o?"^":"",f=0;f<t.length;f++){var p=t[f];if("string"==typeof p)h+=i(p);else{var d=p.repeat?"(?:"+p.pattern+")(?:"+i(p.delimiter)+"(?:"+p.pattern+"))*":p.pattern;e&&e.push(p),p.optional?p.prefix?h+="(?:"+i(p.prefix)+"("+d+"))?":h+="("+d+")?":h+=i(p.prefix)+"("+d+")"}}if(a)s||(h+="(?:"+i(c)+")?"),h+="$"===l?"$":"(?="+l+")";else{var y=t[t.length-1],_="string"==typeof y?y[y.length-1]===c:void 0===y;s||(h+="(?:"+i(c)+"(?="+l+"))?"),_||(h+="(?="+i(c)+"|"+l+")")}return new RegExp(h,u(n))}function l(t,e,r){return t instanceof RegExp?function(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,r){for(var n=[],s=0;s<t.length;s++)n.push(l(t[s],e,r).source);return new RegExp("(?:"+n.join("|")+")",u(r))}(t,e,r):function(t,e,r){return c(s(t,r),e,r)}(t,e,r)}},function(t,e,r){"use strict";(function(e){var n=r(6),s=r(7),o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],u={hash:1,query:1};function c(t){var r,n=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},s={},o=typeof(t=t||n);if("blob:"===t.protocol)s=new h(unescape(t.pathname),{});else if("string"===o)for(r in s=new h(t,{}),u)delete s[r];else if("object"===o){for(r in t)r in u||(s[r]=t[r]);void 0===s.slashes&&(s.slashes=i.test(t.href))}return s}function l(t){var e=o.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function h(t,e,r){if(!(this instanceof h))return new h(t,e,r);var o,i,u,f,p,d,y=a.slice(),_=typeof e,b=this,g=0;for("object"!==_&&"string"!==_&&(r=e,e=null),r&&"function"!=typeof r&&(r=s.parse),e=c(e),o=!(i=l(t||"")).protocol&&!i.slashes,b.slashes=i.slashes||o&&e.slashes,b.protocol=i.protocol||e.protocol||"",t=i.rest,i.slashes||(y[3]=[/(.*)/,"pathname"]);g<y.length;g++)"function"!=typeof(f=y[g])?(u=f[0],d=f[1],u!=u?b[d]=t:"string"==typeof u?~(p=t.indexOf(u))&&("number"==typeof f[2]?(b[d]=t.slice(0,p),t=t.slice(p+f[2])):(b[d]=t.slice(p),t=t.slice(0,p))):(p=u.exec(t))&&(b[d]=p[1],t=t.slice(0,p.index)),b[d]=b[d]||o&&f[3]&&e[d]||"",f[4]&&(b[d]=b[d].toLowerCase())):t=f(t);r&&(b.query=r(b.query)),o&&e.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==e.pathname)&&(b.pathname=function(t,e){for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,s=r[n-1],o=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(o=!0),r.splice(n,1),i--);return o&&r.unshift(""),"."!==s&&".."!==s||r.push(""),r.join("/")}(b.pathname,e.pathname)),n(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(f=b.auth.split(":"),b.username=f[0]||"",b.password=f[1]||""),b.origin=b.protocol&&b.host&&"file:"!==b.protocol?b.protocol+"//"+b.host:"null",b.href=b.toString()}h.prototype={set:function(t,e,r){var o=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||s.parse)(e)),o[t]=e;break;case"port":o[t]=e,n(e,o.protocol)?e&&(o.host=o.hostname+":"+e):(o.host=o.hostname,o[t]="");break;case"hostname":o[t]=e,o.port&&(e+=":"+o.port),o.host=e;break;case"host":o[t]=e,/:\d+$/.test(e)?(e=e.split(":"),o.port=e.pop(),o.hostname=e.join(":")):(o.hostname=e,o.port="");break;case"protocol":o.protocol=e.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":if(e){var i="pathname"===t?"/":"#";o[t]=e.charAt(0)!==i?i+e:e}else o[t]=e;break;default:o[t]=e}for(var u=0;u<a.length;u++){var c=a[u];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(t){t&&"function"==typeof t||(t=s.stringify);var e,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(r.slashes?"//":"");return r.username&&(o+=r.username,r.password&&(o+=":"+r.password),o+="@"),o+=r.host+r.pathname,(e="object"==typeof r.query?t(r.query):r.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),r.hash&&(o+=r.hash),o}},h.extractProtocol=l,h.location=c,h.qs=s,t.exports=h}).call(this,r(1))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,r){"use strict";var n,s=Object.prototype.hasOwnProperty;function o(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}e.stringify=function(t,e){e=e||"";var r,o,i=[];for(o in"string"!=typeof e&&(e="?"),t)if(s.call(t,o)){if((r=t[o])||null!==r&&r!==n&&!isNaN(r)||(r=""),o=encodeURIComponent(o),r=encodeURIComponent(r),null===o||null===r)continue;i.push(o+"="+r)}return i.length?e+i.join("&"):""},e.parse=function(t){for(var e,r=/([^=?&]+)=?([^&]*)/g,n={};e=r.exec(t);){var s=o(e[1]),i=o(e[2]);null===s||null===i||s in n||(n[s]=i)}return n}},function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(e);class s{constructor(){n(this,"_history",[]),n(this,"_target",null)}push(t,e){this._history.push({request:t,response:e})}get request(){return this._target="request",this}get response(){return this._target="response",this}get first(){return this.atCall(1)}get second(){return this.atCall(1)}get third(){return this.atCall(1)}get last(){return this.atCall(this._history.length)}atCall(t){if(!this._target)throw new Error("You must select request or response target before selecting call number");return this._history[t-1][this._target]}reset(){this._history=[]}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i={default:{body:"Hello world !",delay:0,headers:{"content-type":"text/html"},status:200,statusText:"OK"},json:{headers:{"content-type":"application/json"},wrapper:t=>JSON.stringify(t)},webpack:{before:function(t,e,r){let n;this.getPath(e,r);try{n=!function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}().default}catch(t){return{status:404}}return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){o(t,e,r[e])})}return t}({},n=Object.assign({},r,n),{headers:{"content-type":"application/json"},wrapper:t=>JSON.stringify(t)})}},204:{body:null,headers:{"content-type":"text/html"},status:204,statusText:"No Content"},400:{body:null,headers:{"content-type":"text/html"},status:400,statusText:"Bad Request"},401:{body:null,headers:{"content-type":"text/html"},status:401,statusText:"Unauthorized"},403:{body:null,headers:{"content-type":"text/html"},status:403,statusText:"Forbidden"},404:{body:null,headers:{"content-type":"text/html"},status:404,statusText:"Not found"},500:{body:null,headers:{"content-type":"text/html"},status:500,statusText:"Internal Server Error"}},a=r(2),u=r.n(a);function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var l=class{constructor(){c(this,"_presets",{}),c(this,"_fixtures",[]),c(this,"history",new s);for(let t in i)this._presets[t]=new p(this,t,i[t])}start(){return this.running||(u.a.stub(window,"fetch"),this.stub.callsFake(this._processRequest.bind(this))),this}stop(t=!1){return this.running&&window.fetch.restore(),t&&this.reset(),this}reset(t=!0){return this.running&&t&&this.stub.resetHistory(),this.history.reset(),this._fixtures=[],this}get running(){return window.fetch.reset instanceof Function}get calls(){return this.stub.callCount}get stub(){if(this.running)return window.fetch;throw new Error("Server is not started")}preset(t,e={}){if(this._presets[t])return this._presets[t].set(e);let r=new p(this,t,e);return this._presets[t]=r,r}get on(){const t=new S(this);return this._fixtures.push(t),t._mode="on",t.on}get when(){return this.on}_getDefaultFixture(){const t=this._fixtures.findIndex(t=>null===t._matcher);if(t>=0)return this._fixtures[t];const e=new S(this);return this._fixtures.push(e),e}_processRespond(t={}){return"respond"===t._mode&&(t=this._getDefaultFixture()),t._mode="respond",t}get respond(){return this._getDefaultFixture()}async _findFixture(t){let e=[];if(!this._fixtures.length)throw new Error("No fixtures defined to respond to request");for(let r of this._fixtures)await r.match(t)&&e.push(r);if(!e.length)throw new Error("Unable to find a matching fixture for the current request");if(1===e.length)return e[0];for(let t of e)if(null!==t._matcher)return t}async _processRequest(t,e){t=new F(t,e);let r=await this._findFixture(t),n=await r.getResponse(t);return this.history.push(t.clone(),n.clone()),n}get request(){return this.history.request.last}get response(){return this.history.response.last}};function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=class{constructor(t){h(this,"server",null),h(this,"_any",{}),h(this,"_responseKeys",["body","delay","headers","status","statusText","wrapper","pattern","before","after"]),this.server=t}preset(t,e){return this.server.preset(t,e)}get on(){return this.server.on}get when(){return this.server.on}get respond(){return this.server._processRespond(this)}get with(){return this}get and(){return this}set(t={}){if(!(t instanceof Object))throw new Error("Response set must be an object");for(let e in t)this._responseKeys.includes(e)?this[e](t[e]):console.warn('Invalid key "'.concat(e,'" for response set configuration'));return this}body(t){let e=this._getCurrentResponseSet();return!1===t?delete e.body:e.body=t,this}delay(t){let e=this._getCurrentResponseSet();return!1===t?delete e.delay:e.delay=parseInt(t,10),this}headers(t){if(t&&!(t instanceof Object||t instanceof Headers))throw new Error("Headers must be an object or an Headers instance");t instanceof Object&&(t=new Headers(t));let e=this._getCurrentResponseSet();return t?e.headers=t:delete e.headers,this}status(t){let e=this._getCurrentResponseSet();return!1===t?delete e.status:e.status=parseInt(t,10),this}statusText(t){let e=this._getCurrentResponseSet();return t?e.statusText=t:delete e.statusText,this}wrapper(t){let e=this._getCurrentResponseSet();return t?e.wrapper=t:delete e.wrapper,this}pattern(t){let e=this._getCurrentResponseSet();return t?e.pattern=t:delete e.pattern,this}before(t){if(t&&!(t instanceof Function))throw new Error("Before hook must be a function");let e=this._getCurrentResponseSet();return t?e.before=t:delete e.before,this}after(t){if(t&&!(t instanceof Function))throw new Error("Before hook must be a function");let e=this._getCurrentResponseSet();return t?e.after=t:delete e.after,this}};var p=class extends f{constructor(t,e,r){if(super(t),!e)throw new Error("You must provide a name to the preset");if(this.name=e,r){if(!(r instanceof Object))throw new Error("Preset options must be provided as an object");this.set(r)}}_getCurrentResponseSet(){return this._any=this._any||{},this._any}},d=r(0),y=r.n(d);function _(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class b{constructor(t,e){_(this,"_key",null),_(this,"_not",!1),_(this,"_test",null),this._key=t,this._matcher=e}get is(){return this}get not(){return this._not=!this._not,this}equal(t){return this._test=(async e=>{let r,n=e[this._key];return r=t instanceof Function?await t(n,this._key,e):t instanceof RegExp?t.test(n):y()(n,t)}),this._matcher}async process(t){let e=await this._test(t);return this._not?!e:e}}class g extends b{}function w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class v extends b{constructor(t,e,r,n=!0){super(t,e),w(this,"_type",null),w(this,"_warn",!0),this._type=r,this._warn=n}equal(t){return this._test=(async e=>{let r,n=!1;try{r=await e.clone()[this._type]()}catch(t){this.warn&&console.warn("Unable to decode body.\nThis should be harmless if using different decoder between fixtures in the same run.\n","Failed decoding method: ".concat(this._type,"\n"),t)}return n=t instanceof Function?await t(r,this._key,e):t instanceof RegExp?t.test(r):y()(r,t)}),this._matcher}}class m extends b{constructor(t,e,r){super(t,e),function(t,e,r){e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"_name",null),this._name=r}equal(t){return this._test=(async e=>{const r=e.headers;if(!(r instanceof Headers))throw new Error("Unable to extract headers from request");const n=this._name?r.get(this._name):r;let s=!1;return s=t instanceof Function?await t(n,this._key,e):t instanceof RegExp?t.test(n):y()(n,t)}),this._matcher}}class x extends b{}class j extends b{}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var C=class{constructor(t){O(this,"_processors",[]),O(this,"_requestKeys",["method","url","headers","destination","referrer","referrerPolicy","mode","credentials","redirect","integrity","cache","protocol","slashes","auth","username","password","host","hostname","port","pathname","query","hash","href","method","header","body"]),this.fixture=t}get on(){return this.fixture.on}get respond(){return this.fixture.respond}getProcessor(t){let e;switch(t){case"headers":e=new m(t,this);break;case"query":e=new x(t,this);break;case"slashes":e=new g(t,this);break;case"auth":case"cache":case"credentials":case"destination":case"hash":case"href":case"host":case"hostname":case"integrity":case"method":case"password":case"pathname":case"protocol":case"redirect":case"referrer":case"referrerPolicy":case"url":case"username":e=new j(t,this);break;default:throw new Error("Unsupported request parameter to check")}return this._processors.push(e),e}body(t="text",e=!0){const r=new v("headers",this,t,e);return this._processors.push(r),r}header(t){const e=new m("headers",this,t);return this._processors.push(e),e}async match(t){for(let e of this._processors)if(!await e.process(t))return!1;return!0}request(t){if(!(t instanceof Object))throw new Error("Request conditions set must be an object");for(let e in t)this._requestKeys.includes(e)?this[e].equal(t[e]):console.warn('Invalid key "'.concat(e,'" for request conditions configuration'));return this}},P=r(3),E=r.n(P);function k(t,e){if(null==t)return{};var r,n,s=function(t,e){if(null==t)return{};var r,n,s={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(s[r]=t[r]);return s}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function R(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var S=class extends f{constructor(t){super(t),R(this,"calls",0),R(this,"ownCalls",[]),R(this,"globalCalls",[]),R(this,"_callnum",null),R(this,"_matcher",null),R(this,"_ownCall",!1)}get on(){return"respond"===this._mode?this.server.on:(this._matcher=this._matcher||new C(this),new Proxy(this._matcher,{get:(t,e)=>e in t?t[e]:t.getProcessor(e.toLowerCase())}))}_getCurrentResponseSet(){return null!==this._callnum?this._ownCall?(this.ownCalls[this._callnum]=this.ownCalls[this._callnum]||{},this.ownCalls[this._callnum]):(this.globalCalls[this._callnum]=this.globalCalls[this._callnum]||{},this.globalCalls[this._callnum]||{}):(this._any=this._any||{},this._any)}preset(t){const e=this.server._presets[t];if(!e)throw new Error("Unknown preset");return this.set(e._any),this}get to(){return this}firstCall(t=!1){return this._callnum=1,this._ownCall=t,this}secondCall(t=!1){return this._callnum=2,this._ownCall=t,this}thirdCall(t=!1){return this._callnum=3,this._ownCall=t,this}call(t,e){return this._callnum=parseInt(t,10)-1,this._ownCall=e,this}get any(){return this._callnum=null,this._ownCall=!1,this}async match(t){return!this._matcher||await this._matcher.match(t)}async sleep(t){await new Promise(e=>setTimeout(e,t))}extractParams(t,e){const r={},n=[],s=E()(e,n).exec(t);for(let t=0;t<n.length;t++){let e=n[t].name,o=s[t+1];r[e]=o}return r}wrap(t,e){return e instanceof Function?e(t):t||null}getPath(t,e){let r=(e.pattern||t.pathname).split("/").filter(t=>t&&t.indexOf(":")<0),n=t.method.toLowerCase();return r.concat(n).join("/")}async _buildResponse(t,e){if(e.before instanceof Function)try{let r=await e.before.call(this,this.server,t,e);r&&(e=r)}catch(t){return new Response(t.toString(),{status:500,statusText:"Unable to process before hook"})}let{body:r,headers:n,status:s,statusText:o}=e,i=k(e,["body","headers","status","statusText"]);i.params=i.pattern?this.extractParams(t.pathname,i.pattern):{};try{r instanceof Function&&(r=await r(i.params,t,this.server))}catch(t){return new Response(t.toString(),{status:500,statusText:"Unable to process body callback"})}const a=new Response(this.wrap(r,i.wrapper),{headers:n,status:s,statusText:o});try{i.after instanceof Function&&await i.after.call(this,this.server,a)}catch(t){return new Response(t.toString(),{status:500,statusText:"Unable to process after hook"})}return i.delay&&await this.sleep(i.delay),a}getResponse(t){const e=++this.calls,r=this.server.calls;return this._buildResponse(t,this.ownCalls[e]||this.globalCalls[r]||this._any)}},q=r(4),T=r.n(q);class A extends Request{constructor(t,e){super(t,e);const r=T()(this.url,!0);for(let t in r)Object.defineProperty(this,t,{value:r[t]})}clone(){return new A(super.clone())}}var F=A;r.d(e,"Fixture",function(){return S}),r.d(e,"FMFRequest",function(){return F}),r.d(e,"Preset",function(){return p}),r.d(e,"Server",function(){return l});e.default=l}])});