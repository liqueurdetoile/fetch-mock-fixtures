<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual | Fetch-mock-fixtures | Fetch API for testing</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<link rel="stylesheet" href="./inject/css/0-styles.css"><script src="./inject/script/0-docs.js"></script><meta name="description" content="Fixtures based mocker for fetch API with BDD style configuration"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="Fetch-mock-fixtures | Fetch API for testing"><meta property="twitter:description" content="Fixtures based mocker for fetch API with BDD style configuration"></head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.png" style="width:34px;"></a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/liqueurdetoile/fetch-mock-fixtures.git"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/getting_started.html"><a href="manual/getting_started.html" data-ice="link">Getting started</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/server.html"><a href="manual/server.html" data-ice="link">Server control, configuration and history</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/server.html"><a href="manual/server.html#server-control" data-ice="link">Server control</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/server.html"><a href="manual/server.html#adding-fixtures-to-server" data-ice="link">Adding fixtures to server</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/server.html"><a href="manual/server.html#logging-and-verbose-mode" data-ice="link">Logging and verbose mode</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/server.html"><a href="manual/server.html#error-management" data-ice="link">Error management</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/server.html"><a href="manual/server.html#server--39-s-history" data-ice="link">Server&apos;s history</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/response-configuration.html"><a href="manual/response-configuration.html" data-ice="link">Response configuration</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/response-configuration.html"><a href="manual/response-configuration.html#configure-response" data-ice="link">Configure response</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/response-configuration.html"><a href="manual/response-configuration.html#default-response-values" data-ice="link">Default response values</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/response-configuration.html"><a href="manual/response-configuration.html#response-configuration-persistence" data-ice="link">Response configuration persistence</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/response-configuration.html"><a href="manual/response-configuration.html#available-response-options" data-ice="link">Available response options</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/response-configuration.html"><a href="manual/response-configuration.html#using-wrappers" data-ice="link">Using wrappers</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/response-configuration.html"><a href="manual/response-configuration.html#using-patterns" data-ice="link">Using patterns</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/presets.html"><a href="manual/presets.html" data-ice="link">Presets</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/presets.html"><a href="manual/presets.html#using-presets" data-ice="link">Using presets</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/presets.html"><a href="manual/presets.html#local-presets" data-ice="link">Local presets</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/presets.html"><a href="manual/presets.html#adding-editing-a-local-preset" data-ice="link">Adding/editing a local preset</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/presets.html"><a href="manual/presets.html#removing-preset" data-ice="link">Removing preset</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/presets.html"><a href="manual/presets.html#using-global-presets" data-ice="link">Using global presets</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/presets.html"><a href="manual/presets.html#global--code-presets--code--singleton-exports" data-ice="link">Global presets singleton exports</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/presets.html"><a href="manual/presets.html#register-unregister-a-local-preset-as-global" data-ice="link">Register/unregister a local preset as global</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/presets.html"><a href="manual/presets.html#global-presets-availability" data-ice="link">Global presets availability</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/presets.html"><a href="manual/presets.html#built-in-presets" data-ice="link">Built-in presets</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/fixtures.html"><a href="manual/fixtures.html" data-ice="link">Fixture in-depth</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/fixtures.html"><a href="manual/fixtures.html#request-processing" data-ice="link">Request processing</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/fixtures.html"><a href="manual/fixtures.html#fixture-lifecycle" data-ice="link">Fixture lifecycle</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/fixtures.html"><a href="manual/fixtures.html#fixture-hooks-and-body-callback" data-ice="link">Fixture hooks and body callback</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/fixtures.html"><a href="manual/fixtures.html#-code-before--code--hook" data-ice="link">before hook</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/fixtures.html"><a href="manual/fixtures.html#body-callback" data-ice="link">Body callback</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/fixtures.html"><a href="manual/fixtures.html#-code-after--code--hook" data-ice="link">after hook</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/fixtures.html"><a href="manual/fixtures.html#hooks-scope" data-ice="link">Hooks scope</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/fixtures.html"><a href="manual/fixtures.html#adding-fixtures-to-server" data-ice="link">Adding fixtures to server</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/requests-matcher.html"><a href="manual/requests-matcher.html" data-ice="link">Requests matcher</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/requests-matcher.html"><a href="manual/requests-matcher.html#matching-request-properties" data-ice="link">Matching request properties</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/requests-matcher.html"><a href="manual/requests-matcher.html#matching-calls-count" data-ice="link">Matching calls count</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/cheat-sheet.html"><a href="manual/cheat-sheet.html" data-ice="link">Full cheat sheet</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/cheat-sheet.html"><a href="manual/cheat-sheet.html#creating-a-server-instance" data-ice="link">Creating a server instance</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/cheat-sheet.html"><a href="manual/cheat-sheet.html#response-setup--preset-or-fixture-" data-ice="link">Response setup (preset or fixture)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/cheat-sheet.html"><a href="manual/cheat-sheet.html#ordered-responses--fixture-" data-ice="link">Ordered responses (fixture)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/cheat-sheet.html"><a href="manual/cheat-sheet.html#request-matcher-setup--fixture-" data-ice="link">Request matcher setup (fixture)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/cheat-sheet.html"><a href="manual/cheat-sheet.html#starting-configuration" data-ice="link">Starting configuration</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown" data-ice="content"><h1 id="presets">Presets</h1><h2 id="using-presets">Using presets</h2><p>You can tell a fixture to use a preset to build its response by simply calling its <code>preset</code> method with the name of the preset :</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const server = new Server();

server.respond.with.preset(400);</code>
</code></pre>
<p>The preset is only evaluated and merged by the fixture at request time. You can easily override preset options through <a href="./manual/fixtures.html">fixture response configuration</a>.</p>
<p>If the preset is not found in the server instance, an exception will be raised at request time.</p>
<h2 id="local-presets">Local presets</h2><h3 id="adding-editing-a-local-preset">Adding/editing a local preset</h3><p>It can be done by providing an object with its <code>set</code> method and/or using BDD style syntax. Alternatively, the configuration object can be provided to <code>server.preset</code> :</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const server = new Server();

// In the server.preset call
server.preset(&apos;myPreset&apos;, {
  status: 250
  statusText: &apos;weird status&apos;
});

// Another syntax, the same result
server.preset(&apos;myPreset&apos;).set({status: 250}).statusText(&apos;weird&apos;)</code>
</code></pre>
<p>Server will now have <code>myPreset</code> available in its own presets pool. If the presets was already defined, it will be overridden with new options.</p>
<p><strong>Note : the options that are not overridden will be kept as is</strong>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const server = new Server();

server.preset(&apos;myPreset&apos;, {status: 250, statusText: &apos;weird status&apos;});

// Later on
server.preset(&apos;myPreset&apos;).status(200);
// statusText will still equal &apos;weird status&apos;</code>
</code></pre>
<p>You can have a look at the <a href="./manual/response-configuration.html">response configuration</a> for more details about the available options.</p>
<h3 id="removing-preset">Removing preset</h3><p>Simply call the <code>remove</code> method of the preset :</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">  server.preset(&apos;myPreset&apos;).remove();</code>
</code></pre>
<h2 id="using-global-presets">Using global presets</h2><p>Aside local presets that can be defined within a server instance, FMF allows the registration of global presets. Global presets can be added/updated/removed in two ways :</p>
<h3 id="global--code-presets--code--singleton-exports">Global <code>presets</code> singleton exports</h3><p>Global presets are stored in a singleton available through the <code>presets</code> export. Object can be updated at will.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">import {presets} from &apos;fetch-mock-fixtures&apos;;

presets.myPreset = {
  status: 250
  statusText: &apos;weird status&apos;
} // myPreset will now be available globally</code>
</code></pre>
<p>That way is interesting when bootstrapping presets configuration before running tests suite.</p>
<h3 id="register-unregister-a-local-preset-as-global">Register/unregister a local preset as global</h3><p>Since FMF 2.2.0, it is possible to manage global presets from any server instance.</p>
<p>Any local preset can be made global through <code>register</code> method and any global preset can be removed with <code>unregister</code> method.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const server = new Server();
// Create a local preset
const myPreset = server.preset(&apos;myPreset&apos;, {status: 250, statusText: &apos;weird status&apos;});
// And register it as global
myPreset.register();
// Remove the preset from global pool
// It will still be available in the server instance
myPreset.unregister();</code>
</code></pre>
<p>Methods are chainable :</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">const server = new Server();

// Register the preset, unregister it and remove it from server presets pool
server.preset(&apos;myPreset&apos;).status(250).register().unregister().remove();</code>
</code></pre>
<h3 id="global-presets-availability">Global presets availability</h3><p>To allow easy local tweaking of presets, global presets are cloned into local pool when creating a new server instance. Therefore, server&apos;s instance will only access global presets that are already defined before its creation or created within the server instance.</p>
<h3 id="built-in-presets">Built-in presets</h3><p>FMF already have commonly used built-in presets. See <a href="./manual/../file/src/presets.js.html"><code>presets.js</code></a> for details.</p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
